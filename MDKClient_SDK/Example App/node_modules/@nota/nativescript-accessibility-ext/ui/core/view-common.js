"use strict";
var e_1, _a;
Object.defineProperty(exports, "__esModule", { value: true });
var platform_1 = require("@nativescript/core/platform");
var view_1 = require("@nativescript/core/ui/core/view");
var view_common_1 = require("@nativescript/core/ui/core/view/view-common");
exports.ViewCommon = view_common_1.ViewCommon;
var helpers_1 = require("../../utils/helpers");
var AccessibilityTrait;
(function (AccessibilityTrait) {
    AccessibilityTrait["None"] = "none";
    AccessibilityTrait["Button"] = "button";
    AccessibilityTrait["Link"] = "link";
    AccessibilityTrait["SearchField"] = "search";
    AccessibilityTrait["Image"] = "image";
    AccessibilityTrait["Selected"] = "selected";
    AccessibilityTrait["PlaysSound"] = "plays";
    AccessibilityTrait["KeyboardKey"] = "key";
    AccessibilityTrait["StaticText"] = "text";
    AccessibilityTrait["SummaryElement"] = "summary";
    AccessibilityTrait["NotEnabled"] = "disabled";
    AccessibilityTrait["UpdatesFrequently"] = "frequentUpdates";
    AccessibilityTrait["StartsMediaSession"] = "startsMedia";
    AccessibilityTrait["Adjustable"] = "adjustable";
    AccessibilityTrait["AllowsDirectInteraction"] = "allowsDirectInteraction";
    AccessibilityTrait["CausesPageTurn"] = "pageTurn";
    AccessibilityTrait["Header"] = "header";
})(AccessibilityTrait = exports.AccessibilityTrait || (exports.AccessibilityTrait = {}));
var AccessibilityRole;
(function (AccessibilityRole) {
    AccessibilityRole["None"] = "none";
    AccessibilityRole["Button"] = "button";
    AccessibilityRole["Link"] = "link";
    AccessibilityRole["Search"] = "search";
    AccessibilityRole["Image"] = "image";
    AccessibilityRole["ImageButton"] = "image_button";
    AccessibilityRole["KeyboardKey"] = "keyboard_key";
    AccessibilityRole["StaticText"] = "text_field";
    AccessibilityRole["Adjustable"] = "adjustable";
    AccessibilityRole["Summary"] = "summery";
    AccessibilityRole["Header"] = "header";
    AccessibilityRole["Checkbox"] = "checkbox";
    AccessibilityRole["ProgressBar"] = "progress_bar";
    AccessibilityRole["RadioButton"] = "radiobutton";
    AccessibilityRole["SpinButton"] = "spin_button";
    AccessibilityRole["Switch"] = "switch";
})(AccessibilityRole = exports.AccessibilityRole || (exports.AccessibilityRole = {}));
var AccessibilityState;
(function (AccessibilityState) {
    AccessibilityState["Selected"] = "selected";
    AccessibilityState["Checked"] = "checked";
    AccessibilityState["Unchecked"] = "unchecked";
    AccessibilityState["Disabled"] = "disabled";
})(AccessibilityState = exports.AccessibilityState || (exports.AccessibilityState = {}));
var AccessibilityLiveRegion;
(function (AccessibilityLiveRegion) {
    AccessibilityLiveRegion["None"] = "none";
    AccessibilityLiveRegion["Polite"] = "polite";
    AccessibilityLiveRegion["Assertive"] = "assertive";
})(AccessibilityLiveRegion = exports.AccessibilityLiveRegion || (exports.AccessibilityLiveRegion = {}));
exports.commonFunctions = {
    accessibilityAnnouncement: 'accessibilityAnnouncement',
    accessibilityScreenChanged: 'accessibilityScreenChanged',
};
exports.iosFunctions = {
    iosPostAccessibilityNotification: 'iosPostAccessibilityNotification',
};
exports.androidFunctions = {
    androidSendAccessibilityEvent: 'androidSendAccessibilityEvent',
};
exports.allFunctions = __assign({}, exports.commonFunctions, exports.iosFunctions, exports.androidFunctions);
try {
    for (var _b = __values(Object.keys(exports.allFunctions)), _c = _b.next(); !_c.done; _c = _b.next()) {
        var fnName = _c.value;
        helpers_1.setViewFunction(view_common_1.ViewCommon, fnName);
    }
}
catch (e_1_1) { e_1 = { error: e_1_1 }; }
finally {
    try {
        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
    }
    finally { if (e_1) throw e_1.error; }
}
helpers_1.setViewFunction(view_common_1.ViewCommon, 'postAccessibilityNotification', function (notificationType, msg) {
    console.warn("DEPRECATED: " + this + ".postAccessibilityNotification is no longer supported. Please use \"" + exports.iosFunctions.iosPostAccessibilityNotification + "\"");
    this[exports.iosFunctions.iosPostAccessibilityNotification](notificationType, msg);
});
helpers_1.setViewFunction(view_common_1.ViewCommon, 'sendAccessibilityEvent', function (eventName, text) {
    console.warn("DEPRECATED: " + this + ".sendAccessibilityEvent is no longer supported. Please use \"" + exports.androidFunctions.androidSendAccessibilityEvent + "\"");
    this[exports.androidFunctions.androidSendAccessibilityEvent](eventName, text);
});
var accessiblePropertyName = 'accessible';
var accessibleCssName = 'a11y-enabled';
var accessibilityHiddenPropertyName = 'accessibilityHidden';
var accessibilityHiddenCssName = 'a11y-hidden';
var accessibilityIdPropertyName = 'accessibilityIdentifier';
var accessibilityRolePropertyName = 'accessibilityRole';
var accessibilityRoleCssName = 'a11y-role';
var accessibilityStatePropertyName = 'accessibilityState';
var accessibilityStateCssName = 'a11y-state';
var accessibilityLabelPropertyName = 'accessibilityLabel';
var accessibilityValuePropertyName = 'accessibilityValue';
var accessibilityHintPropertyName = 'accessibilityHint';
var accessibilityLiveRegionPropertyName = 'accessibilityLiveRegion';
var accessibilityLiveRegionCssName = 'a11y-live-region';
var accessibilityTraitsPropertyName = 'accessibilityTraits';
var accessibilityLanguagePropertyName = 'accessibilityLanguage';
var accessibilityLanguageCssName = 'a11y-lang';
var accessibilityMediaSessionPropertyName = 'accessibilityMediaSession';
var accessibilityMediaSessionCssName = 'a11y-media-session';
exports.accessibleCssProperty = helpers_1.addBooleanCssPropertyToView(view_common_1.ViewCommon, accessiblePropertyName, accessibleCssName);
exports.accessibilityIdProperty = helpers_1.addPropertyToView(view_common_1.ViewCommon, accessibilityIdPropertyName);
exports.accessibilityRoleCssProperty = helpers_1.addCssPropertyToView(view_common_1.ViewCommon, accessibilityRolePropertyName, accessibilityRoleCssName, false, undefined, helpers_1.makePropertyEnumConverter(AccessibilityRole));
exports.accessibilityStateCssProperty = helpers_1.addCssPropertyToView(view_common_1.ViewCommon, accessibilityStatePropertyName, accessibilityStateCssName, false, undefined, helpers_1.makePropertyEnumConverter(AccessibilityState));
exports.accessibilityLabelProperty = helpers_1.addPropertyToView(view_common_1.ViewCommon, accessibilityLabelPropertyName);
exports.accessibilityValueProperty = helpers_1.addPropertyToView(view_common_1.ViewCommon, accessibilityValuePropertyName);
exports.accessibilityHintProperty = helpers_1.addPropertyToView(view_common_1.ViewCommon, accessibilityHintPropertyName);
exports.accessibilityHiddenCssProperty = helpers_1.addBooleanCssPropertyToView(view_common_1.ViewCommon, accessibilityHiddenPropertyName, accessibilityHiddenCssName, !!platform_1.isIOS);
exports.accessibilityLiveRegionCssProperty = helpers_1.addCssPropertyToView(view_common_1.ViewCommon, accessibilityLiveRegionPropertyName, accessibilityLiveRegionCssName, false, 'none', function (value) {
    switch (("" + value).toLowerCase()) {
        case 'none': {
            return 'none';
        }
        case 'polite': {
            return 'polite';
        }
        case 'assertive': {
            return 'assertive';
        }
    }
    return 'none';
});
exports.accessibilityTraitsProperty = helpers_1.addPropertyToView(view_common_1.ViewCommon, accessibilityTraitsPropertyName);
exports.accessibilityLanguageProperty = helpers_1.addCssPropertyToView(view_common_1.ViewCommon, accessibilityLanguagePropertyName, accessibilityLanguageCssName);
exports.accessibilityMediaSessionCssProperty = helpers_1.addBooleanCssPropertyToView(view_common_1.ViewCommon, accessibilityMediaSessionPropertyName, accessibilityMediaSessionCssName, false);
Object.defineProperties(view_1.View, {
    accessibilityFocusEvent: {
        configurable: true,
        get: function () {
            return 'accessibilityFocus';
        },
    },
    accessibilityBlurEvent: {
        configurable: true,
        get: function () {
            return 'accessibilityBlur';
        },
    },
    accessibilityFocusChangedEvent: {
        configurable: true,
        get: function () {
            return 'accessibilityFocusChanged';
        },
    },
    AccessibilityTrait: {
        configurable: true,
        get: function () {
            return AccessibilityTrait;
        },
    },
    AccessibilityComponentType: {
        configurable: true,
        get: function () {
            return AccessibilityRole;
        },
    },
    AccessibilityState: {
        configurable: true,
        get: function () {
            return AccessibilityState;
        },
    },
});
Object.defineProperties(view_1.View.prototype, {
    importantForAccessibility: {
        configurable: true,
        get: function () {
            return null;
        },
        set: function (value) {
            console.warn("DEPRECATED: " + this + ".importantForAccessibility = \"" + value + "\" is no longer supported. Please use \"" + accessibilityHiddenPropertyName + "\"");
            if (value && value !== 'yes') {
                this[accessibilityHiddenPropertyName] = true;
            }
        },
    },
    accessibilityElementsHidden: {
        configurable: true,
        get: function () {
            return null;
        },
        set: function (value) {
            console.warn("DEPRECATED: " + this + ".accessibilityElementsHidden = \"" + value + "\" is no longer supported. Please use \"" + accessibilityHiddenPropertyName + "\"");
            this[accessibilityHiddenPropertyName] = !!value;
        },
    },
    accessibilityComponentType: {
        configurable: true,
        get: function () {
            return this[accessibilityRolePropertyName];
        },
        set: function (value) {
            console.warn("DEPRECATED: " + this + ".accessibilityComponentType = \"" + value + "\" is no longer supported. Please use \"" + accessibilityRolePropertyName + "\"");
            if (value === 'radiobutton_checked') {
                this[accessibilityRolePropertyName] = AccessibilityRole.RadioButton;
                this[accessibilityStatePropertyName] = AccessibilityState.Checked;
            }
            else if (value === 'radiobutton_unchecked') {
                this[accessibilityRolePropertyName] = AccessibilityRole.RadioButton;
                this[accessibilityStatePropertyName] = AccessibilityState.Unchecked;
            }
            else {
                this[accessibilityRolePropertyName] = value;
            }
        },
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy1jb21tb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ2aWV3LWNvbW1vbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSx3REFBb0Q7QUFDcEQsd0RBQTBGO0FBQzFGLDJFQUF5RTtBQXVXaEUscUJBdldBLHdCQUFVLENBdVdBO0FBdFduQiwrQ0FBdUo7QUFFdkosSUFBWSxrQkFzRlg7QUF0RkQsV0FBWSxrQkFBa0I7SUFJNUIsbUNBQWEsQ0FBQTtJQUtiLHVDQUFpQixDQUFBO0lBS2pCLG1DQUFhLENBQUE7SUFLYiw0Q0FBc0IsQ0FBQTtJQUt0QixxQ0FBZSxDQUFBO0lBS2YsMkNBQXFCLENBQUE7SUFLckIsMENBQW9CLENBQUE7SUFLcEIseUNBQW1CLENBQUE7SUFLbkIseUNBQW1CLENBQUE7SUFLbkIsZ0RBQTBCLENBQUE7SUFLMUIsNkNBQXVCLENBQUE7SUFLdkIsMkRBQXFDLENBQUE7SUFLckMsd0RBQWtDLENBQUE7SUFLbEMsK0NBQXlCLENBQUE7SUFLekIseUVBQW1ELENBQUE7SUFNbkQsaURBQTJCLENBQUE7SUFLM0IsdUNBQWlCLENBQUE7QUFDbkIsQ0FBQyxFQXRGVyxrQkFBa0IsR0FBbEIsMEJBQWtCLEtBQWxCLDBCQUFrQixRQXNGN0I7QUFFRCxJQUFZLGlCQTREWDtBQTVERCxXQUFZLGlCQUFpQjtJQUkzQixrQ0FBYSxDQUFBO0lBS2Isc0NBQWlCLENBQUE7SUFLakIsa0NBQWEsQ0FBQTtJQUtiLHNDQUFpQixDQUFBO0lBS2pCLG9DQUFlLENBQUE7SUFLZixpREFBNEIsQ0FBQTtJQUs1QixpREFBNEIsQ0FBQTtJQUs1Qiw4Q0FBeUIsQ0FBQTtJQUt6Qiw4Q0FBeUIsQ0FBQTtJQUt6Qix3Q0FBbUIsQ0FBQTtJQUtuQixzQ0FBaUIsQ0FBQTtJQUNqQiwwQ0FBcUIsQ0FBQTtJQUNyQixpREFBNEIsQ0FBQTtJQUM1QixnREFBMkIsQ0FBQTtJQUMzQiwrQ0FBMEIsQ0FBQTtJQUMxQixzQ0FBaUIsQ0FBQTtBQUNu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WUFFbEosSUFBSSxLQUFLLEtBQUsscUJBQXFCLEVBQUU7Z0JBQ25DLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLFdBQVcsQ0FBQztnQkFDcEUsSUFBSSxDQUFDLDhCQUE4QixDQUFDLEdBQUcsa0JBQWtCLENBQUMsT0FBTyxDQUFDO2FBQ25FO2lCQUFNLElBQUksS0FBSyxLQUFLLHVCQUF1QixFQUFFO2dCQUM1QyxJQUFJLENBQUMsNkJBQTZCLENBQUMsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXLENBQUM7Z0JBQ3BFLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLFNBQVMsQ0FBQzthQUNyRTtpQkFBTTtnQkFDTCxJQUFJLENBQUMsNkJBQTZCLENBQUMsR0FBRyxLQUFLLENBQUM7YUFDN0M7UUFDSCxDQUFDO0tBQ0Y7Q0FDRixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi92aWV3LmQudHNcIiAvPlxuXG5pbXBvcnQgeyBpc0lPUyB9IGZyb20gJ0BuYXRpdmVzY3JpcHQvY29yZS9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBQb3N0QWNjZXNzaWJpbGl0eU5vdGlmaWNhdGlvblR5cGUsIFZpZXcgfSBmcm9tICdAbmF0aXZlc2NyaXB0L2NvcmUvdWkvY29yZS92aWV3JztcbmltcG9ydCB7IFZpZXdDb21tb24gfSBmcm9tICdAbmF0aXZlc2NyaXB0L2NvcmUvdWkvY29yZS92aWV3L3ZpZXctY29tbW9uJztcbmltcG9ydCB7IGFkZEJvb2xlYW5Dc3NQcm9wZXJ0eVRvVmlldywgYWRkQ3NzUHJvcGVydHlUb1ZpZXcsIGFkZFByb3BlcnR5VG9WaWV3LCBtYWtlUHJvcGVydHlFbnVtQ29udmVydGVyLCBzZXRWaWV3RnVuY3Rpb24gfSBmcm9tICcuLi8uLi91dGlscy9oZWxwZXJzJztcblxuZXhwb3J0IGVudW0gQWNjZXNzaWJpbGl0eVRyYWl0IHtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBubyB0cmFpdHMuXG4gICAqL1xuICBOb25lID0gJ25vbmUnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGJ1dHRvbi5cbiAgICovXG4gIEJ1dHRvbiA9ICdidXR0b24nLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGxpbmsuXG4gICAqL1xuICBMaW5rID0gJ2xpbmsnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIHNlYXJjaCBmaWVsZC5cbiAgICovXG4gIFNlYXJjaEZpZWxkID0gJ3NlYXJjaCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHNob3VsZCBiZSB0cmVhdGVkIGFzIGFuIGltYWdlLlxuICAgKi9cbiAgSW1hZ2UgPSAnaW1hZ2UnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqL1xuICBTZWxlY3RlZCA9ICdzZWxlY3RlZCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHBsYXlzIGl0cyBvd24gc291bmQgd2hlbiBhY3RpdmF0ZWQuXG4gICAqL1xuICBQbGF5c1NvdW5kID0gJ3BsYXlzJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgYmVoYXZlcyBhcyBhIGtleWJvYXJkIGtleS5cbiAgICovXG4gIEtleWJvYXJkS2V5ID0gJ2tleScsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHNob3VsZCBiZSB0cmVhdGVkIGFzIHN0YXRpYyB0ZXh0IHRoYXQgY2Fubm90IGNoYW5nZS5cbiAgICovXG4gIFN0YXRpY1RleHQgPSAndGV4dCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHByb3ZpZGVzIHN1bW1hcnkgaW5mb3JtYXRpb24gd2hlbiB0aGUgYXBwbGljYXRpb24gc3RhcnRzLlxuICAgKi9cbiAgU3VtbWFyeUVsZW1lbnQgPSAnc3VtbWFyeScsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGlzIG5vdCBlbmFibGVkIGFuZCBkb2VzIG5vdCByZXNwb25kIHRvIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAqL1xuICBOb3RFbmFibGVkID0gJ2Rpc2FibGVkJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgZnJlcXVlbnRseSB1cGRhdGVzIGl0cyBsYWJlbCBvciB2YWx1ZS5cbiAgICovXG4gIFVwZGF0ZXNGcmVxdWVudGx5ID0gJ2ZyZXF1ZW50VXBkYXRlcycsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHN0YXJ0cyBhIG1lZGlhIHNlc3Npb24gd2hlbiBpdCBpcyBhY3RpdmF0ZWQuXG4gICAqL1xuICBTdGFydHNNZWRpYVNlc3Npb24gPSAnc3RhcnRzTWVkaWEnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBhbGxvd3MgY29udGludW91cyBhZGp1c3RtZW50IHRocm91Z2ggYSByYW5nZSBvZiB2YWx1ZXMuXG4gICAqL1xuICBBZGp1c3RhYmxlID0gJ2FkanVzdGFibGUnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBhbGxvd3MgZGlyZWN0IHRvdWNoIGludGVyYWN0aW9uIGZvciBWb2ljZU92ZXIgdXNlcnMuXG4gICAqL1xuICBBbGxvd3NEaXJlY3RJbnRlcmFjdGlvbiA9ICdhbGxvd3NEaXJlY3RJbnRlcmFjdGlvbicsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHNob3VsZCBjYXVzZSBhbiBhdXRvbWF0aWMgcGFnZSB0dXJuIHdoZW4gVm9pY2VPdmVyIGZpbmlzaGVzIHJlYWRpbmcgdGhlIHRleHQgd2l0aGluIGl0LlxuICAgKiBOb3RlOiBSZXF1aXJlcyBjdXN0b20gdmlldyB3aXRoIGFjY2Vzc2liaWxpdHlTY3JvbGwoLi4uKVxuICAgKi9cbiAgQ2F1c2VzUGFnZVR1cm4gPSAncGFnZVR1cm4nLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBpcyBhIGhlYWRlciB0aGF0IGRpdmlkZXMgY29udGVudCBpbnRvIHNlY3Rpb25zLCBzdWNoIGFzIHRoZSB0aXRsZSBvZiBhIG5hdmlnYXRpb24gYmFyLlxuICAgKi9cbiAgSGVhZGVyID0gJ2hlYWRlcicsXG59XG5cbmV4cG9ydCBlbnVtIEFjY2Vzc2liaWxpdHlSb2xlIHtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBubyB0cmFpdHMuXG4gICAqL1xuICBOb25lID0gJ25vbmUnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGJ1dHRvbi5cbiAgICovXG4gIEJ1dHRvbiA9ICdidXR0b24nLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGxpbmsuXG4gICAqL1xuICBMaW5rID0gJ2xpbmsnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIHNlYXJjaCBmaWVsZC5cbiAgICovXG4gIFNlYXJjaCA9ICdzZWFyY2gnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhbiBpbWFnZS5cbiAgICovXG4gIEltYWdlID0gJ2ltYWdlJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgYSBpbWFnZSBidXR0b24uXG4gICAqL1xuICBJbWFnZUJ1dHRvbiA9ICdpbWFnZV9idXR0b24nLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBiZWhhdmVzIGFzIGEga2V5Ym9hcmQga2V5LlxuICAgKi9cbiAgS2V5Ym9hcmRLZXkgPSAna2V5Ym9hcmRfa2V5JyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgc3RhdGljIHRleHQgdGhhdCBjYW5ub3QgY2hhbmdlLlxuICAgKi9cbiAgU3RhdGljVGV4dCA9ICd0ZXh0X2ZpZWxkJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgYWxsb3dzIGNvbnRpbnVvdXMgYWRqdXN0bWVudCB0aHJvdWdoIGEgcmFuZ2Ugb2YgdmFsdWVzLlxuICAgKi9cbiAgQWRqdXN0YWJsZSA9ICdhZGp1c3RhYmxlJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgcHJvdmlkZXMgc3VtbWFyeSBpbmZvcm1hdGlvbiB3aGVuIHRoZSBhcHBsaWNhdGlvbiBzdGFydHMuXG4gICAqL1xuICBTdW1tYXJ5ID0gJ3N1bW1lcnknLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBpcyBhIGhlYWRlciB0aGF0IGRpdmlkZXMgY29udGVudCBpbnRvIHNlY3Rpb25zLCBzdWNoIGFzIHRoZSB0aXRsZSBvZiBhIG5hdmlnYXRpb24gYmFyLlxuICAgKi9cbiAgSGVhZGVyID0gJ2hlYWRlcicsXG4gIENoZWNrYm94ID0gJ2NoZWNrYm94JyxcbiAgUHJvZ3Jlc3NCYXIgPSAncHJvZ3Jlc3NfYmFyJyxcbiAgUmFkaW9CdXR0b24gPSAncmFkaW9idXR0b24nLFxuICBTcGluQnV0dG9uID0gJ3NwaW5fYnV0dG9uJyxcbiAgU3dpdGNoID0gJ3N3aXRjaCcsXG59XG5cbmV4cG9ydCBlbnVtIEFjY2Vzc2liaWxpdHlTdGF0ZSB7XG4gIFNlbGVjdGVkID0gJ3NlbGVjdGVkJyxcbiAgQ2hlY2tlZCA9ICdjaGVja2VkJyxcbiAgVW5jaGVja2VkID0gJ3VuY2hlY2tlZCcsXG4gIERpc2FibGVkID0gJ2Rpc2FibGVkJyxcbn1cblxuZXhwb3J0IGVudW0gQWNjZXNzaWJpbGl0eUxpdmVSZWdpb24ge1xuICBOb25lID0gJ25vbmUnLFxuICBQb2xpdGUgPSAncG9saXRlJyxcbiAgQXNzZXJ0aXZlID0gJ2Fzc2VydGl2ZScsXG59XG5cbmV4cG9ydCBjb25zdCBjb21tb25GdW5jdGlvbnMgPSB7XG4gIGFjY2Vzc2liaWxpdHlBbm5vdW5jZW1lbnQ6ICdhY2Nlc3NpYmlsaXR5QW5ub3VuY2VtZW50JyxcbiAgYWNjZXNzaWJpbGl0eVNjcmVlbkNoYW5nZWQ6ICdhY2Nlc3NpYmlsaXR5U2NyZWVuQ2hhbmdlZCcsXG59O1xuXG5leHBvcnQgY29uc3QgaW9zRnVuY3Rpb25zID0ge1xuICBpb3NQb3N0QWNjZXNzaWJpbGl0eU5vdGlmaWNhdGlvbjogJ2lvc1Bvc3RBY2Nlc3NpYmlsaXR5Tm90aWZpY2F0aW9uJyxcbn07XG5leHBvcnQgY29uc3QgYW5kcm9pZEZ1bmN0aW9ucyA9IHtcbiAgYW5kcm9pZFNlbmRBY2Nlc3NpYmlsaXR5RXZlbnQ6ICdhbmRyb2lkU2VuZEFjY2Vzc2liaWxpdHlFdmVudCcsXG59O1xuZXhwb3J0IGNvbnN0IGFsbEZ1bmN0aW9ucyA9IHtcbiAgLi4uY29tbW9uRnVuY3Rpb25zLFxuICAuLi5pb3NGdW5jdGlvbnMsXG4gIC4uLmFuZHJvaWRGdW5jdGlvbnMsXG59O1xuXG5mb3IgKGNvbnN0IGZuTmFtZSBvZiBPYmplY3Qua2V5cyhhbGxGdW5jdGlvbnMpKSB7XG4gIHNldFZpZXdGdW5jdGlvbihWaWV3Q29tbW9uLCBmbk5hbWUpO1xufVxuXG5zZXRWaWV3RnVuY3Rpb24oVmlld0NvbW1vbiwgJ3Bvc3RBY2Nlc3NpYmlsaXR5Tm90aWZpY2F0aW9uJywgZnVuY3Rpb24obm90aWZpY2F0aW9uVHlwZTogUG9zdEFjY2Vzc2liaWxpdHlOb3RpZmljYXRpb25UeXBlLCBtc2c/OiBzdHJpbmcpIHtcbiAgY29uc29sZS53YXJuKGBERVBSRUNBVEVEOiAke3RoaXN9LnBvc3RBY2Nlc3NpYmlsaXR5Tm90aWZpY2F0aW9uIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgXCIke2lvc0Z1bmN0aW9ucy5pb3NQb3N0QWNjZXNzaWJpbGl0eU5vdGlmaWNhdGlvbn1cImApO1xuXG4gIHRoaXNbaW9zRnVuY3Rpb25zLmlvc1Bvc3RBY2Nlc3NpYmlsaXR5Tm90aWZpY2F0aW9uXShub3RpZmljYXRpb25UeXBlLCBtc2cpO1xufSk7XG5cbnNldFZpZXdGdW5jdGlvbihWaWV3Q29tbW9uLCAnc2VuZEFjY2Vzc2liaWxpdHlFdmVudCcsIGZ1bmN0aW9uKGV2ZW50TmFtZTogc3RyaW5nLCB0ZXh0Pzogc3RyaW5nKSB7XG4gIGNvbnNvbGUud2FybihgREVQUkVDQVRFRDogJHt0aGlzfS5zZW5kQWNjZXNzaWJpbGl0eUV2ZW50IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgXCIke2FuZHJvaWRGdW5jdGlvbnMuYW5kcm9pZFNlbmRBY2Nlc3NpYmlsaXR5RXZlbnR9XCJgKTtcblxuICB0aGlzW2FuZHJvaWRGdW5jdGlvbnMuYW5kcm9pZFNlbmRBY2Nlc3NpYmlsaXR5RXZlbnRdKGV2ZW50TmFtZSwgdGV4dCk7XG59KTtcblxuY29uc3QgYWNjZXNzaWJsZVByb3BlcnR5TmFtZSA9ICdhY2Nlc3NpYmxlJztcbmNvbnN0IGFjY2Vzc2libGVDc3NOYW1lID0gJ2ExMXktZW5hYmxlZCc7XG5jb25zdCBhY2Nlc3NpYmlsaXR5SGlkZGVuUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlIaWRkZW4nO1xuY29uc3QgYWNjZXNzaWJpbGl0eUhpZGRlbkNzc05hbWUgPSAnYTExeS1oaWRkZW4nO1xuY29uc3QgYWNjZXNzaWJpbGl0eUlkUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlJZGVudGlmaWVyJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlSb2xlUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlSb2xlJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlSb2xlQ3NzTmFtZSA9ICdhMTF5LXJvbGUnO1xuY29uc3QgYWNjZXNzaWJpbGl0eVN0YXRlUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlTdGF0ZSc7XG5jb25zdCBhY2Nlc3NpYmlsaXR5U3RhdGVDc3NOYW1lID0gJ2ExMXktc3RhdGUnO1xuY29uc3QgYWNjZXNzaWJpbGl0eUxhYmVsUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlMYWJlbCc7XG5jb25zdCBhY2Nlc3NpYmlsaXR5VmFsdWVQcm9wZXJ0eU5hbWUgPSAnYWNjZXNzaWJpbGl0eVZhbHVlJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlIaW50UHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlIaW50JztcbmNvbnN0IGFjY2Vzc2liaWxpdHlMaXZlUmVnaW9uUHJvcGVydHlOYW1lID0gJ2FjY2Vzc2liaWxpdHlMaXZlUmVnaW9uJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlMaXZlUmVnaW9uQ3NzTmFtZSA9ICdhMTF5LWxpdmUtcmVnaW9uJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlUcmFpdHNQcm9wZXJ0eU5hbWUgPSAnYWNjZXNzaWJpbGl0eVRyYWl0cyc7XG5jb25zdCBhY2Nlc3NpYmlsaXR5TGFuZ3VhZ2VQcm9wZXJ0eU5hbWUgPSAnYWNjZXNzaWJpbGl0eUxhbmd1YWdlJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlMYW5ndWFnZUNzc05hbWUgPSAnYTExeS1sYW5nJztcbmNvbnN0IGFjY2Vzc2liaWxpdHlNZWRpYVNlc3Npb25Qcm9wZXJ0eU5hbWUgPSAnYWNjZXNzaWJpbGl0eU1lZGlhU2Vzc2lvbic7XG5jb25zdCBhY2Nlc3NpYmlsaXR5TWVkaWFTZXNzaW9uQ3NzTmFtZSA9ICdhMTF5LW1lZGlhLXNlc3Npb24nO1xuXG4vLyBDb21tb24gcHJvcGVydGllc1xuZXhwb3J0IGNvbnN0IGFjY2Vzc2libGVDc3NQcm9wZXJ0eSA9IGFkZEJvb2xlYW5Dc3NQcm9wZXJ0eVRvVmlldyhWaWV3Q29tbW9uLCBhY2Nlc3NpYmxlUHJvcGVydHlOYW1lLCBhY2Nlc3NpYmxlQ3NzTmFtZSk7XG5leHBvcnQgY29uc3QgYWNjZXNzaWJpbGl0eUlkUHJvcGVydHkgPSBhZGRQcm9wZXJ0eVRvVmlldzxWaWV3LCBzdHJpbmcgfCBudWxsPihWaWV3Q29tbW9uLCBhY2Nlc3NpYmlsaXR5SWRQcm9wZXJ0eU5hbWUpO1xuZXhwb3J0IGNvbnN0IGFjY2Vzc2liaWxpdHlSb2xlQ3NzUHJvcGVydHkgPSBhZGRDc3NQcm9wZXJ0eVRvVmlldzxWaWV3LCBzdHJpbmc+KFxuICBWaWV3Q29tbW9uLFxuICBhY2Nlc3NpYmlsaXR5Um9sZVByb3BlcnR5TmFtZSxcbiAgYWNjZXNzaWJpbGl0eVJvbGVDc3NOYW1lLFxuICBmYWxzZSxcbiAgdW5kZWZpbmVkLFxuICBtYWtlUHJvcGVydHlFbnVtQ29udmVydGVyPEFjY2Vzc2liaWxpdHlSb2xlPihBY2Nlc3NpYmlsaXR5Um9sZSksXG4pO1xuZXhwb3J0IGNvbnN0IGFjY2Vzc2liaWxpdHlTdGF0ZUNzc1Byb3BlcnR5ID0gYWRkQ3NzUHJvcGVydHlUb1ZpZXc8Vmlldywgc3RyaW5nPihcbiAgVmlld0NvbW1vbixcbiAgYWNjZXNzaWJpbGl0eVN0YXRlUHJvcGVydHlOYW1lLFxuICBhY2Nlc3NpYmlsaXR5U3RhdGVDc3NOYW1lLFxuICBmYWxzZSxcbiAgdW5kZWZpbmVkLFxuICBtYWtlUHJvcGVydHlFbnVtQ29udmVydGVyPEFjY2Vzc2liaWxpdHlTdGF0ZT4oQWNjZXNzaWJpbGl0eVN0YXRlKSxcbik7XG5leHBvcnQgY29uc3QgYWNjZXNzaWJpbGl0eUxhYmVsUHJvcGVydHkgPSBhZGRQcm9wZXJ0eVRvVmlldzxWaWV3LCBzdHJpbmcgfCBudWxsPihWaWV3Q29tbW9uLCBhY2Nlc3NpYmlsaXR5TGFiZWxQcm9wZXJ0eU5hbWUpO1xuZXhwb3J0IGNvbnN0IGFjY2Vzc2liaWxpdHlWYWx1ZVByb3BlcnR5ID0gYWRkUHJvcGVydHlUb1ZpZXc8Vmlldywgc3RyaW5nIHwgbnVsbD4oVmlld0NvbW1vbiwgYWNjZXNzaWJpbGl0eVZhbHVlUHJvcGVydHlOYW1lKTtcbmV4cG9ydCBjb25zdCBhY2Nlc3NpYmlsaXR5SGludFByb3BlcnR5ID0gYWRkUHJvcGVydHlUb1ZpZXc8Vmlldywgc3RyaW5nIHwgbnVsbD4oVmlld0NvbW1vbiwgYWNjZXNzaWJpbGl0eUhpbnRQcm9wZXJ0eU5hbWUpO1xuZXhwb3J0IGNvbnN0IGFjY2Vzc2liaWxpdHlIaWRkZW5Dc3NQcm9wZXJ0eSA9IGFkZEJvb2xlYW5Dc3NQcm9wZXJ0eVRvVmlldyhWaWV3Q29tbW9uLCBhY2Nlc3NpYmlsaXR5SGlkZGVuUHJvcGVydHlOYW1lLCBhY2Nlc3NpYmlsaXR5SGlkZGVuQ3NzTmFtZSwgISFpc0lPUyk7XG5leHBvcnQgY29uc3QgYWNjZXNzaWJpbGl0eUxpdmVSZWdpb25Dc3NQcm9wZXJ0eSA9IGFkZENzc1Byb3BlcnR5VG9WaWV3PFZpZXcsICdub25lJyB8ICdwb2xpdGUnIHwgJ2Fzc2VydGl2ZSc+KFxuICBWaWV3Q29tbW9uLFxuICBhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvblByb3BlcnR5TmFtZSxcbiAgYWNjZXNzaWJpbGl0eUxpdmVSZWdpb25Dc3NOYW1lLFxuICBmYWxzZSxcbiAgJ25vbmUnLFxuICAodmFsdWU6IHN0cmluZyk6ICdub25lJyB8ICdwb2xpdGUnIHwgJ2Fzc2VydGl2ZScgPT4ge1xuICAgIHN3aXRjaCAoYCR7dmFsdWV9YC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdub25lJzoge1xuICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgICAgfVxuICAgICAgY2FzZSAncG9saXRlJzoge1xuICAgICAgICByZXR1cm4gJ3BvbGl0ZSc7XG4gICAgICB9XG4gICAgICBjYXNlICdhc3NlcnRpdmUnOiB7XG4gICAgICAgIHJldHVybiAnYXNzZXJ0aXZlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ25vbmUnO1xuICB9LFxuKTtcblxuLy8gaU9TIHByb3BlcnRpZXM6XG5leHBvcnQgY29uc3QgYWNjZXNzaWJpbGl0eVRyYWl0c1Byb3BlcnR5ID0gYWRkUHJvcGVydHlUb1ZpZXc8Vmlldywgc3RyaW5nIHwgc3RyaW5nW10gfCBudWxsPihWaWV3Q29tbW9uLCBhY2Nlc3NpYmlsaXR5VHJhaXRzUHJvcGVydHlOYW1lKTtcbmV4cG9ydCBjb25zdCBhY2Nlc3NpYmlsaXR5TGFuZ3VhZ2VQcm9wZXJ0eSA9IGFkZENzc1Byb3BlcnR5VG9WaWV3PFZpZXcsIHN0cmluZz4oVmlld0NvbW1vbiwgYWNjZXNzaWJpbGl0eUxhbmd1YWdlUHJvcGVydHlOYW1lLCBhY2Nlc3NpYmlsaXR5TGFuZ3VhZ2VDc3NOYW1lKTtcbmV4cG9ydCBjb25zdCBhY2Nlc3NpYmlsaXR5TWVkaWFTZXNzaW9uQ3NzUHJvcGVydHkgPSBhZGRCb29sZWFuQ3NzUHJvcGVydHlUb1ZpZXcoXG4gIFZpZXdDb21tb24sXG4gIGFjY2Vzc2liaWxpdHlNZWRpYVNlc3Npb25Qcm9wZXJ0eU5hbWUsXG4gIGFjY2Vzc2liaWxpdHlNZWRpYVNlc3Npb25Dc3NOYW1lLFxuICBmYWxzZSxcbik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZpZXcsIHtcbiAgYWNjZXNzaWJpbGl0eUZvY3VzRXZlbnQ6IHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuICdhY2Nlc3NpYmlsaXR5Rm9jdXMnO1xuICAgIH0sXG4gIH0sXG4gIGFjY2Vzc2liaWxpdHlCbHVyRXZlbnQ6IHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuICdhY2Nlc3NpYmlsaXR5Qmx1cic7XG4gICAgfSxcbiAgfSxcbiAgYWNjZXNzaWJpbGl0eUZvY3VzQ2hhbmdlZEV2ZW50OiB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiAnYWNjZXNzaWJpbGl0eUZvY3VzQ2hhbmdlZCc7XG4gICAgfSxcbiAgfSxcbiAgQWNjZXNzaWJpbGl0eVRyYWl0OiB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiBBY2Nlc3NpYmlsaXR5VHJhaXQ7XG4gICAgfSxcbiAgfSxcbiAgQWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU6IHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIEFjY2Vzc2liaWxpdHlSb2xlO1xuICAgIH0sXG4gIH0sXG4gIEFjY2Vzc2liaWxpdHlTdGF0ZToge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gQWNjZXNzaWJpbGl0eVN0YXRlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVmlldy5wcm90b3R5cGUsIHtcbiAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eToge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNldCh0aGlzOiBWaWV3LCB2YWx1ZSkge1xuICAgICAgY29uc29sZS53YXJuKGBERVBSRUNBVEVEOiAke3RoaXN9LmltcG9ydGFudEZvckFjY2Vzc2liaWxpdHkgPSBcIiR7dmFsdWV9XCIgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gUGxlYXNlIHVzZSBcIiR7YWNjZXNzaWJpbGl0eUhpZGRlblByb3BlcnR5TmFtZX1cImApO1xuICAgICAgaWYgKHZhbHVlICYmIHZhbHVlICE9PSAneWVzJykge1xuICAgICAgICB0aGlzW2FjY2Vzc2liaWxpdHlIaWRkZW5Qcm9wZXJ0eU5hbWVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICBhY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW46IHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBzZXQodGhpczogVmlldywgdmFsdWUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgREVQUkVDQVRFRDogJHt0aGlzfS5hY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW4gPSBcIiR7dmFsdWV9XCIgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gUGxlYXNlIHVzZSBcIiR7YWNjZXNzaWJpbGl0eUhpZGRlblByb3BlcnR5TmFtZX1cImApO1xuXG4gICAgICB0aGlzW2FjY2Vzc2liaWxpdHlIaWRkZW5Qcm9wZXJ0eU5hbWVdID0gISF2YWx1ZTtcbiAgICB9LFxuICB9LFxuICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZToge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQodGhpczogVmlldykge1xuICAgICAgcmV0dXJuIHRoaXNbYWNjZXNzaWJpbGl0eVJvbGVQcm9wZXJ0eU5hbWVdO1xuICAgIH0sXG4gICAgc2V0KHRoaXM6IFZpZXcsIHZhbHVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYERFUFJFQ0FURUQ6ICR7dGhpc30uYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGUgPSBcIiR7dmFsdWV9XCIgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gUGxlYXNlIHVzZSBcIiR7YWNjZXNzaWJpbGl0eVJvbGVQcm9wZXJ0eU5hbWV9XCJgKTtcblxuICAgICAgaWYgKHZhbHVlID09PSAncmFkaW9idXR0b25fY2hlY2tlZCcpIHtcbiAgICAgICAgdGhpc1thY2Nlc3NpYmlsaXR5Um9sZVByb3BlcnR5TmFtZV0gPSBBY2Nlc3NpYmlsaXR5Um9sZS5SYWRpb0J1dHRvbjtcbiAgICAgICAgdGhpc1thY2Nlc3NpYmlsaXR5U3RhdGVQcm9wZXJ0eU5hbWVdID0gQWNjZXNzaWJpbGl0eVN0YXRlLkNoZWNrZWQ7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAncmFkaW9idXR0b25fdW5jaGVja2VkJykge1xuICAgICAgICB0aGlzW2FjY2Vzc2liaWxpdHlSb2xlUHJvcGVydHlOYW1lXSA9IEFjY2Vzc2liaWxpdHlSb2xlLlJhZGlvQnV0dG9uO1xuICAgICAgICB0aGlzW2FjY2Vzc2liaWxpdHlTdGF0ZVByb3BlcnR5TmFtZV0gPSBBY2Nlc3NpYmlsaXR5U3RhdGUuVW5jaGVja2VkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpc1thY2Nlc3NpYmlsaXR5Um9sZVByb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxufSk7XG5cbmV4cG9ydCB7IFZpZXdDb21tb24gfTtcbiJdfQ==